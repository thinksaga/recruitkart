model User {
  id                  String             @id @default(uuid())
  email               String             @unique
  password_hash       String
  role                UserRole
  verification_status VerificationStatus @default(PENDING)
  organization_id     String?
  reset_token         String?
  reset_token_expiry  DateTime?
  created_at          DateTime           @default(now())
  updated_at          DateTime           @updatedAt

  // Relations
  organization Organization? @relation(fields: [organization_id], references: [id])
  tas_profile  TASProfile?
  candidate    Candidate?
  tickets      Ticket[]
}

model Organization {
  id         String   @id @default(uuid())
  name       String
  gstin      String?
  domain     String?
  website    String?
  logo_url   String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Relations
  users       User[]
  jobs        Job[]
  invitations Invitation[]
}

model Invitation {
  id              String           @id @default(uuid())
  email           String
  role            UserRole
  organization_id String
  token           String           @unique
  status          InvitationStatus @default(PENDING)
  expires_at      DateTime
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt

  // Relations
  organization Organization @relation(fields: [organization_id], references: [id])

  @@unique([email, organization_id])
}

model TASProfile {
  id              String   @id @default(uuid())
  user_id         String   @unique
  pan_number      String   @unique
  linkedin_url    String?
  credits_balance Int      @default(0)
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt

  // Relations
  user        User         @relation(fields: [user_id], references: [id])
  submissions Submission[]
}
